# Queries for Simulation service
PISD.GET_PRODUCT_INFORMATION_LIFE=conPISD; SELECT p.INSURANCE_PRODUCT_ID, p.PRODUCT_SHORT_DESC, p.INSURANCE_PRODUCT_DESC FROM PISD.T_PISD_INSURANCE_PRODUCT p WHERE p.INSURANCE_PRODUCT_TYPE = :INSURANCE_PRODUCT_TYPE
PISD.GET_PRODUCT_MODALITIES_INFORMATION_LIFE=conPISD;SELECT pm.INSURANCE_COMPANY_MODALITY_ID, pm.INSURANCE_MODALITY_NAME, pm.INSURANCE_MODALITY_TYPE, pm.SUGGESTED_MODALITY_IND_TYPE, ms.PUBLICATION_ORDER_NUMBER FROM PISD.T_PISD_INSRNC_PRD_MODALITY pm LEFT JOIN PISD.T_PISD_INSURANCE_MOD_SCHAN ms ON pm.INSURANCE_PRODUCT_ID = ms.INSURANCE_PRODUCT_ID AND pm.INSURANCE_MODALITY_TYPE = ms.INSURANCE_MODALITY_TYPE WHERE pm.INSURANCE_PRODUCT_ID = :INSURANCE_PRODUCT_ID AND pm.INSURANCE_MODALITY_TYPE IN (:INSURANCE_MODALITY_TYPE) AND ms.SALE_CHANNEL_ID = :SALE_CHANNEL_ID ORDER BY ms.PUBLICATION_ORDER_NUMBER
PISD.SELECT_INSURANCE_SIMULATION_ID_LIFE=conPISD;SELECT PISD.Q_PISD_SIMULATION_ID0.NEXTVAL FROM DUAL
PISD.INSERT_INSURANCE_SIMULATION_LIFE=conPISD;INSERT INTO PISD.T_PISD_INSURANCE_SIMULATION (INSURANCE_SIMULATION_ID, INSRNC_COMPANY_SIMULATION_ID, CUSTOMER_ID, CUSTOMER_SIMULATION_DATE, CUST_SIMULATION_EXPIRED_DATE, BANK_FACTOR_TYPE, BANK_FACTOR_AMOUNT, BANK_FACTOR_PER, REGISTRY_SITUATION_TYPE, SOURCE_BRANCH_ID, CREATION_USER_ID, CREATION_DATE, USER_AUDIT_ID, AUDIT_DATE, PERSONAL_DOC_TYPE, PARTICIPANT_PERSONAL_ID, INSURED_CUSTOMER_NAME, CLIENT_LAST_NAME, CUSTOMER_SEGMENT_NAME) VALUES (:INSURANCE_SIMULATION_ID, :INSRNC_COMPANY_SIMULATION_ID, :CUSTOMER_ID, TO_DATE(:CUSTOMER_SIMULATION_DATE, 'DD/MM/YYYY'), TO_DATE(:CUST_SIMULATION_EXPIRED_DATE, 'DD/MM/YYYY'), :BANK_FACTOR_TYPE, :BANK_FACTOR_AMOUNT, :BANK_FACTOR_PER, '01', :SOURCE_BRANCH_ID, :CREATION_USER_ID, SYSTIMESTAMP, :USER_AUDIT_ID, SYSTIMESTAMP, :PERSONAL_DOC_TYPE, :PARTICIPANT_PERSONAL_ID, :INSURED_CUSTOMER_NAME, :CLIENT_LAST_NAME, :CUSTOMER_SEGMENT_NAME)
PISD.INSERT_INSRNC_SIMLT_PRD_LIFE=conPISD;INSERT INTO PISD.T_PISD_INSRNC_SIMLT_PRD (INSURANCE_SIMULATION_ID, INSURANCE_PRODUCT_ID, CAMPAIGN_FACTOR_TYPE, CAMPAIGN_OFFER_1_AMOUNT, CAMPAIGN_FACTOR_PER, SALE_CHANNEL_ID, REGISTRY_SITUATION_TYPE, SOURCE_BRANCH_ID, CREATION_USER_ID, CREATION_DATE, USER_AUDIT_ID, AUDIT_DATE) VALUES (:INSURANCE_SIMULATION_ID, :INSURANCE_PRODUCT_ID, :CAMPAIGN_FACTOR_TYPE, :CAMPAIGN_OFFER_1_AMOUNT, :CAMPAIGN_FACTOR_PER, :SALE_CHANNEL_ID, '01', :SOURCE_BRANCH_ID, :CREATION_USER_ID, SYSTIMESTAMP, :USER_AUDIT_ID, SYSTIMESTAMP)
PISD.QUERY_GET_INSURANCE_AMOUNT=conPISD; SELECT d.INSURED_AMOUNT FROM PISD.T_PISD_INSURANCE_CONTRACT d INNER JOIN PISD.T_PISD_INSRNC_CTR_PARTICIPANT p ON d.INSURANCE_CONTRACT_ENTITY_ID = p.INSURANCE_CONTRACT_ENTITY_ID AND d.INSURANCE_CONTRACT_BRANCH_ID = p.INSURANCE_CONTRACT_BRANCH_ID AND d.INSRC_CONTRACT_INT_ACCOUNT_ID = p.INSRC_CONTRACT_INT_ACCOUNT_ID WHERE d.INSURANCE_PRODUCT_ID = :INSURANCE_PRODUCT_ID and d.CONTRACT_STATUS_ID = 'FOR' AND p.PARTICIPANT_ROLE_ID = :PARTICIPANT_ROLE_ID AND (p.CUSTOMER_ID = :CUSTOMER_ID OR p.PARTICIPANT_PERSONAL_ID = :PARTICIPANT_PERSONAL_ID);
PISD.INSERT_PARTICIPANT_SIMULATION=conPISD; INSERT INTO PISD.T_PISD_SIMLT_INSURED_LIFE\
    (INSURANCE_SIMULATION_ID,INSURANCE_PRODUCT_ID,INSURED_AMOUNT,CURRENCY_ID,PERIOD_TYPE,\
PERIOD_NUMBER,REFUND_PER,TOTAL_RETURN_AMOUNT,INSURED_ID,CUSTOMER_DOCUMENT_TYPE,\
PERSONAL_ID,IS_BBVA_CUSTOMER_TYPE,CUSTOMER_ENTRY_DATE,PARTICIPANT_ROLE_ID,\
INSURED_CUSTOMER_NAME,CLIENT_LAST_NAME,USER_EMAIL_PERSONAL_DESC,PHONE_ID,\
CUSTOMER_BIRTH_DATE,GENDER_ID,CREATION_USER_ID,CREATION_DATE,USER_AUDIT_ID,AUDIT_DATE)\
VALUES(:INSURANCE_SIMULATION_ID,:INSURANCE_PRODUCT_ID,:INSURED_AMOUNT,:CURRENCY_ID,:PERIOD_TYPE,:PERIOD_NUMBER,:REFUND_PER,\
:TOTAL_RETURN_AMOUNT,:INSURED_ID,:CUSTOMER_DOCUMENT_TYPE,:PERSONAL_ID,:IS_BBVA_CUSTOMER_TYPE,:CUSTOMER_ENTRY_DATE,\
:PARTICIPANT_ROLE_ID,:INSURED_CUSTOMER_NAME,:CLIENT_LAST_NAME,:USER_EMAIL_PERSONAL_DESC,:PHONE_ID,\
:CUSTOMER_BIRTH_DATE,:GENDER_ID,:CREATION_USER_ID,SYSTIMESTAMP,:USER_AUDIT_ID,SYSTIMESTAMP)

# Queries for Quotation service
PISD.GET_SIMULATION_INFORMATION_FOR_EASYES_QUOTATION = conPISD; SELECT INSURANCE_SIMULATION_ID, CUST_SIMULATION_EXPIRED_DATE FROM PISD.T_PISD_INSURANCE_SIMULATION WHERE INSRNC_COMPANY_SIMULATION_ID = :INSRNC_COMPANY_SIMULATION_ID
PISD.GET_REQUIRED_INFORMATION_FOR_EASYES_QUOTATION = conPISD; SELECT p.INSURANCE_PRODUCT_ID, p.PRODUCT_SHORT_DESC, p.INSURANCE_PRODUCT_DESC, pm.INSURANCE_MODALITY_NAME, pm.INSURANCE_COMPANY_MODALITY_ID FROM PISD.T_PISD_INSURANCE_PRODUCT p INNER JOIN PISD.T_PISD_INSRNC_PRD_MODALITY pm ON p.INSURANCE_PRODUCT_ID = pm.INSURANCE_PRODUCT_ID WHERE p.INSURANCE_PRODUCT_TYPE = :INSURANCE_PRODUCT_TYPE AND pm.INSURANCE_MODALITY_TYPE = :INSURANCE_MODALITY_TYPE
PISD.GET_PAYMENT_FREQUENCY_NAME = conPISD; SELECT PAYMENT_FREQUENCY_NAME FROM PISD.T_PISD_INSRNC_PAYMENT_PERIOD WHERE POLICY_PAYMENT_FREQUENCY_TYPE = :POLICY_PAYMENT_FREQUENCY_TYPE
PISD.INSERT_INSURANCE_QUOTATION=conPISD; INSERT INTO PISD.T_PISD_INSURANCE_QUOTATION (POLICY_QUOTA_INTERNAL_ID, INSURANCE_SIMULATION_ID, INSURANCE_COMPANY_QUOTA_ID, QUOTE_DATE, QUOTA_HMS_DATE, POLICY_QUOTA_END_VALIDITY_DATE, CUSTOMER_ID, POLICY_QUOTA_STATUS_TYPE, LAST_CHANGE_BRANCH_ID, SOURCE_BRANCH_ID, CREATION_USER_ID, CREATION_DATE, USER_AUDIT_ID, AUDIT_DATE, PERSONAL_DOC_TYPE, PARTICIPANT_PERSONAL_ID) VALUES (:POLICY_QUOTA_INTERNAL_ID, :INSURANCE_SIMULATION_ID, :INSURANCE_COMPANY_QUOTA_ID, TO_DATE(:QUOTE_DATE, 'DD/MM/YYYY'), SYSTIMESTAMP, :POLICY_QUOTA_END_VALIDITY_DATE, :CUSTOMER_ID, 'COT', :LAST_CHANGE_BRANCH_ID, :SOURCE_BRANCH_ID, :CREATION_USER_ID, SYSTIMESTAMP, :USER_AUDIT_ID, SYSTIMESTAMP, :PERSONAL_DOC_TYPE, :PARTICIPANT_PERSONAL_ID)
PISD.INSERT_INSURANCE_QUOTATION_MOD=conPISD; INSERT INTO PISD.T_PISD_INSRNC_QUOTATION_MOD (POLICY_QUOTA_INTERNAL_ID, INSURANCE_PRODUCT_ID, INSURANCE_MODALITY_TYPE, SALE_CHANNEL_ID, PAYMENT_TERM_NUMBER, POLICY_PAYMENT_FREQUENCY_TYPE, FINANCING_START_DATE, FINANCING_END_DATE, PREMIUM_AMOUNT, PREMIUM_CURRENCY_ID, SAVED_QUOTATION_IND_TYPE, LAST_CHANGE_BRANCH_ID, SOURCE_BRANCH_ID, POLICY_QUOTA_STATUS_TYPE, CREATION_USER_ID, CREATION_DATE, USER_AUDIT_ID, AUDIT_DATE, CONTACT_EMAIL_DESC, CUSTOMER_PHONE_DESC, DATA_TREATMENT_IND_TYPE) VALUES (:POLICY_QUOTA_INTERNAL_ID, :INSURANCE_PRODUCT_ID, :INSURANCE_MODALITY_TYPE, :SALE_CHANNEL_ID, :PAYMENT_TERM_NUMBER, :POLICY_PAYMENT_FREQUENCY_TYPE, TO_DATE(:FINANCING_START_DATE, 'DD/MM/YYYY'), TO_DATE(:FINANCING_END_DATE, 'DD/MM/YYYY'), :PREMIUM_AMOUNT, :PREMIUM_CURRENCY_ID, :SAVED_QUOTATION_IND_TYPE, :LAST_CHANGE_BRANCH_ID, :SOURCE_BRANCH_ID, 'COT', :CREATION_USER_ID, SYSTIMESTAMP, :USER_AUDIT_ID, SYSTIMESTAMP, :CONTACT_EMAIL_DESC, :CUSTOMER_PHONE_DESC, :DATA_TREATMENT_IND_TYPE)
PISD.VALIDATE_IF_QUOTATION_EXISTS=conPISD; SELECT COUNT(POLICY_QUOTA_INTERNAL_ID) AS RESULT_NUMBER FROM PISD.T_PISD_INSURANCE_QUOTATION WHERE POLICY_QUOTA_INTERNAL_ID = :POLICY_QUOTA_INTERNAL_ID
PISD.UPDATE_QUOTATION_MOD=conPISD; UPDATE PISD.T_PISD_INSRNC_QUOTATION_MOD SET PREMIUM_AMOUNT = :PREMIUM_AMOUNT, LAST_CHANGE_BRANCH_ID = :LAST_CHANGE_BRANCH_ID WHERE POLICY_QUOTA_INTERNAL_ID = :POLICY_QUOTA_INTERNAL_ID AND INSURANCE_PRODUCT_ID = :INSURANCE_PRODUCT_ID AND INSURANCE_MODALITY_TYPE = :INSURANCE_MODALITY_TYPE
PISD.INSERT_INSURED_QUOTATION_LIFE=conPISD; INSERT INTO PISD.T_PISD_INSURED_QUOTATION_LIFE (POLICY_QUOTA_INTERNAL_ID,INSURANCE_PRODUCT_ID,INSURANCE_MODALITY_TYPE,INSURED_AMOUNT,CURRENCY_ID,PERIOD_TYPE,PERIOD_NUMBER,REFUND_PER,TOTAL_RETURN_AMOUNT,INSURED_ID,CUSTOMER_DOCUMENT_TYPE,PERSONAL_ID,IS_BBVA_CUSTOMER_TYPE,CUSTOMER_ENTRY_DATE,PARTICIPANT_ROLE_ID,INSURED_CUSTOMER_NAME,CLIENT_LAST_NAME,USER_EMAIL_PERSONAL_DESC,PHONE_ID,CUSTOMER_BIRTH_DATE,CREATION_USER_ID,CREATION_DATE,USER_AUDIT_ID,AUDIT_DATE,GENDER_ID)VALUES(:POLICY_QUOTA_INTERNAL_ID,:INSURANCE_PRODUCT_ID,:INSURANCE_MODALITY_TYPE,:INSURED_AMOUNT,:CURRENCY_ID,:PERIOD_TYPE,:PERIOD_NUMBER,:REFUND_PER,:TOTAL_RETURN_AMOUNT,:INSURED_ID,:CUSTOMER_DOCUMENT_TYPE,:PERSONAL_ID,:IS_BBVA_CUSTOMER_TYPE,:CUSTOMER_ENTRY_DATE,:PARTICIPANT_ROLE_ID,:INSURED_CUSTOMER_NAME,:CLIENT_LAST_NAME,:USER_EMAIL_PERSONAL_DESC,:PHONE_ID,:CUSTOMER_BIRTH_DATE,:CREATION_USER_ID,SYSTIMESTAMP,:USER_AUDIT_ID,SYSTIMESTAMP,:GENDER_ID)
PISD.UPDATE_INSURED_QUOTATION_LIFE=conPISD; UPDATE PISD.T_PISD_INSURED_QUOTATION_LIFE SET INSURED_AMOUNT = :INSURED_AMOUNT, CURRENCY_ID = :CURRENCY_ID, PERIOD_TYPE = :PERIOD_TYPE, PERIOD_NUMBER = :PERIOD_NUMBER, REFUND_PER = :REFUND_PER, TOTAL_RETURN_AMOUNT = :TOTAL_RETURN_AMOUNT, INSURED_ID = :INSURED_ID, CUSTOMER_DOCUMENT_TYPE = :CUSTOMER_DOCUMENT_TYPE, PERSONAL_ID = :PERSONAL_ID, IS_BBVA_CUSTOMER_TYPE = :IS_BBVA_CUSTOMER_TYPE, CUSTOMER_ENTRY_DATE = :CUSTOMER_ENTRY_DATE, PARTICIPANT_ROLE_ID = :PARTICIPANT_ROLE_ID, INSURED_CUSTOMER_NAME = :INSURED_CUSTOMER_NAME, CLIENT_LAST_NAME = :CLIENT_LAST_NAME, USER_EMAIL_PERSONAL_DESC = :USER_EMAIL_PERSONAL_DESC, PHONE_ID = :PHONE_ID, CUSTOMER_BIRTH_DATE = :CUSTOMER_BIRTH_DATE, USER_AUDIT_ID = :USER_AUDIT_ID, GENDER_ID = :GENDER_ID, AUDIT_DATE = SYSTIMESTAMP WHERE POLICY_QUOTA_INTERNAL_ID = :POLICY_QUOTA_INTERNAL_ID AND INSURANCE_PRODUCT_ID = :INSURANCE_PRODUCT_ID AND INSURANCE_MODALITY_TYPE = :INSURANCE_MODALITY_TYPE
PISD.VALIDATE_IF_QUOTATION_LIFE_EXISTS=conPISD; SELECT COUNT(POLICY_QUOTA_INTERNAL_ID) AS RESULT_NUMBER_LIFE FROM PISD.T_PISD_INSURED_QUOTATION_LIFE WHERE POLICY_QUOTA_INTERNAL_ID = :POLICY_QUOTA_INTERNAL_ID AND INSURANCE_PRODUCT_ID = :INSURANCE_PRODUCT_ID AND INSURANCE_MODALITY_TYPE = :INSURANCE_MODALITY_TYPE
PISD.DELETE_INSURED_QUOTATION_LIFE=conPISD; DELETE FROM PISD.T_PISD_INSURED_QUOTATION_LIFE WHERE POLICY_QUOTA_INTERNAL_ID = :POLICY_QUOTA_INTERNAL_ID
PISD.DELETE_QUOTATION_MOD=conPISD; DELETE FROM PISD.T_PISD_INSRNC_QUOTATION_MOD WHERE POLICY_QUOTA_INTERNAL_ID = :POLICY_QUOTA_INTERNAL_ID
# Other queries
PISD.GET_INSURED_DATA_LIFE=conPISD; SELECT INSURED_ID, CUSTOMER_DOCUMENT_TYPE, PERSONAL_ID, IS_BBVA_CUSTOMER_TYPE, CUSTOMER_ENTRY_DATE, PARTICIPANT_ROLE_ID, INSURED_CUSTOMER_NAME, CLIENT_LAST_NAME, USER_EMAIL_PERSONAL_DESC, PHONE_ID, CUSTOMER_BIRTH_DATE, GENDER_ID FROM PISD.T_PISD_INSURED_QUOTATION_LIFE WHERE POLICY_QUOTA_INTERNAL_ID = :POLICY_QUOTA_INTERNAL_ID AND INSURANCE_PRODUCT_ID = :INSURANCE_PRODUCT_ID AND INSURANCE_MODALITY_TYPE = :INSURANCE_MODALITY_TYPE 
